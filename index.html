<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Coolie Nutrition System</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(180deg,#0c1626,#0f1f38);
    color: #fff;
    margin:0;
    padding:20px;
}
h1 { margin-bottom:10px; }
.section { margin-top:25px; }
button {
    background:#2e6df6;
    color:#fff;
    border:none;
    padding:10px 16px;
    border-radius:6px;
    cursor:pointer;
    margin-top:8px;
}
button.secondary {
    background:#2c3445;
}
input, select {
    padding:8px;
    margin-top:6px;
    border-radius:6px;
    border:none;
    width:100%;
}
.card {
    background:#15233c;
    padding:15px;
    border-radius:10px;
    margin-top:10px;
}
.red { color:#ff5e5e; }
.yellow { color:#ffd65e; }
.green { color:#5eff9b; }
.small { font-size:14px; opacity:0.8; }
hr { border:1px solid #1f2c48; margin:20px 0; }
</style>
</head>
<body>

<h1>Coolie Meal Planner</h1>

<div class="section card">
<h3>Dog Weights (lbs)</h3>
<label>Coco Weight</label>
<input type="number" id="cocoWeight" value="55">

<label>Ollie Weight</label>
<input type="number" id="ollieWeight" value="65">

<label>Activity Level</label>
<select id="activity">
<option value="1.2">Low</option>
<option value="1.4" selected>Normal</option>
<option value="1.6">Active</option>
</select>

<label>Meals per Day</label>
<select id="mealsPerDay">
<option>1</option>
<option selected>2</option>
<option>3</option>
</select>

<label>Batch Days (1â€“7)</label>
<input type="range" id="batchDays" min="1" max="7" value="7" oninput="updateBatchLabel()">
<p class="small" id="batchLabel">7 days</p>

<button onclick="generateMeal()">Generate Meal</button>
<button class="secondary" onclick="saveMeal()">Save Meal</button>
<button class="secondary" onclick="exportGrocery()">Export Grocery List</button>
</div>

<div id="mealOutput" class="section"></div>

<script>

// SAFE INGREDIENT POOL (AUTO FILTERED FROM BOTH DOGS DATA)
// Only LOW or unlisted ingredients

const safeProteins = [
"Chicken","Turkey","Salmon","Cod","Whitefish","Sardine","Bison","Goat","Quail","Pork"
];

const safeCarbs = [
"White Rice","Brown Rice","Quinoa","Barley","Oats","Pumpkin"
];

const safeVeg = [
"Carrots","Zucchini","Green Beans","Spinach","Broccoli","Butternut Squash","Cabbage"
];

const safeFats = [
"Salmon Oil","Sardine Oil","Olive Oil","Flaxseed"
];

let lastGrocery = "";

function updateBatchLabel(){
    document.getElementById("batchLabel").innerText =
        document.getElementById("batchDays").value + " days";
}

function calculateCalories(weightLbs, activityMultiplier){
    let weightKg = weightLbs * 0.4536;
    let RER = 70 * Math.pow(weightKg,0.75);
    return RER * activityMultiplier;
}

function randomItem(arr){
    return arr[Math.floor(Math.random()*arr.length)];
}

function generateMeal(){

    let cocoWeight = parseFloat(document.getElementById("cocoWeight").value);
    let ollieWeight = parseFloat(document.getElementById("ollieWeight").value);
    let activity = parseFloat(document.getElementById("activity").value);
    let mealsPerDay = parseInt(document.getElementById("mealsPerDay").value);
    let batchDays = parseInt(document.getElementById("batchDays").value);

    let cocoCal = calculateCalories(cocoWeight,activity);
    let ollieCal = calculateCalories(ollieWeight,activity);

    let totalDailyCalories = cocoCal + ollieCal;

    // HOME COOK STYLE RATIOS
    let proteinCals = totalDailyCalories * 0.5;
    let carbCals = totalDailyCalories * 0.25;
    let vegCals = totalDailyCalories * 0.2;
    let fatCals = totalDailyCalories * 0.05;

    // Calorie density approximations
    let proteinWeight = proteinCals / 1.2;
    let carbWeight = carbCals / 1.5;
    let vegWeight = vegCals / 0.5;
    let fatWeight = fatCals / 9;

    let totalDailyOz = (proteinWeight + carbWeight + vegWeight + fatWeight)/28.35;

    let perMealOz = totalDailyOz / mealsPerDay;

    let batchTotalOz = totalDailyOz * batchDays;
    let batchTotalLbs = batchTotalOz / 16;

    let protein = randomItem(safeProteins);
    let carb = randomItem(safeCarbs);
    let veg1 = randomItem(safeVeg);
    let veg2 = randomItem(safeVeg);
    let fat = randomItem(safeFats);

    lastGrocery =
`Batch for ${batchDays} Days

Protein:
${(proteinWeight*batchDays/453.6).toFixed(2)} lbs ${protein}

Carb:
${(carbWeight*batchDays/453.6).toFixed(2)} lbs ${carb}

Vegetables:
${(vegWeight*batchDays/453.6/2).toFixed(2)} lbs ${veg1}
${(vegWeight*batchDays/453.6/2).toFixed(2)} lbs ${veg2}

Fat:
${(fatWeight*batchDays/28.35).toFixed(2)} oz ${fat}
`;

    document.getElementById("mealOutput").innerHTML = `
<div class="card">
<h3>Generated Home Cook Meal</h3>

<p><b>Protein:</b> ${protein}</p>
<p><b>Carb:</b> ${carb}</p>
<p><b>Vegetables:</b> ${veg1} + ${veg2}</p>
<p><b>Fat Booster:</b> ${fat}</p>

<hr>

<p><b>Total Daily Food:</b> ${totalDailyOz.toFixed(2)} oz (~${(totalDailyOz/4).toFixed(2)} cups)</p>
<p><b>Per Meal:</b> ${perMealOz.toFixed(2)} oz (~${(perMealOz/4).toFixed(2)} cups)</p>

<hr>

<p><b>Batch Cook (${batchDays} days)</b></p>
<p>Total Needed: ${batchTotalLbs.toFixed(2)} lbs</p>

<hr>

<h4>Grocery List</h4>
<pre>${lastGrocery}</pre>

</div>
`;
}

function saveMeal(){
    if(lastGrocery){
        localStorage.setItem("savedMeal",lastGrocery);
        alert("Meal Saved");
    }
}

function exportGrocery(){
    if(!lastGrocery) return;
    let blob = new Blob([lastGrocery], { type: "text/plain" });
    let link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "grocery_list.txt";
    link.click();
}

</script>

</body>
</html>
