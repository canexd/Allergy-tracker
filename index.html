<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Coco & Ollie ‚Äî Allergy Scanner + Meal Planner</title>

<style>
/* ======= YOUR ORIGINAL STYLES 100% UNCHANGED ======= */
:root{
  --bg:#0b1424;
  --panel:#121f35;
  --panel2:#0f1b2f;
  --ink:#eaf1ff;
  --muted:rgba(234,241,255,.78);
  --muted2:rgba(234,241,255,.60);
  --line:rgba(255,255,255,.08);
  --blue:#2f6df6;
  --purple:#8a5cff;
  --good:#5cffad;
  --bad:#ff6b6b;
  --caution:#ffd166;
  --shadow:0 16px 44px rgba(0,0,0,.34);
  --radius:18px;
  --radius2:14px;
  --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
}
*{box-sizing:border-box}
body{
  margin:0; padding:18px;
  background: radial-gradient(1200px 800px at 20% 0%, rgba(47,109,246,.18), transparent 55%),
              radial-gradient(1200px 800px at 80% 10%, rgba(138,92,255,.14), transparent 55%),
              var(--bg);
  color:var(--ink);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.wrap{max-width:980px;margin:0 auto}
.hero{
  display:flex;align-items:center;justify-content:space-between;gap:14px;
  margin:10px 0 14px;padding:14px;border:1px solid var(--line);
  background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
  border-radius:var(--radius);box-shadow:var(--shadow);
}
.hero h1{font-size:18px;margin:0}
.hero .sub{font-size:13px;color:var(--muted);margin-top:3px}
.badgeRow{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
.badge{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.04);color:var(--muted)}
.tabs{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:14px 0 18px}
.tabBtn{border:none;cursor:pointer;padding:11px 14px;border-radius:999px;font-weight:800;color:var(--ink);background:rgba(255,255,255,.05);border:1px solid var(--line)}
.tabBtn.active{background:linear-gradient(180deg,rgba(47,109,246,.45),rgba(47,109,246,.22));border-color:rgba(47,109,246,.45)}
.card{background:linear-gradient(180deg,rgba(255,255,255,.045),rgba(255,255,255,.02));border:1px solid var(--line);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);margin-bottom:16px}
textarea,input,select{width:100%;padding:12px;border-radius:14px;border:1px solid var(--line);background:rgba(10,18,32,.65);color:var(--ink)}
textarea{min-height:122px}
.btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.btn{border:none;cursor:pointer;padding:11px 14px;border-radius:14px;font-weight:900;color:var(--ink);background:rgba(255,255,255,.06);border:1px solid var(--line)}
.btn.primary{background:linear-gradient(180deg,rgba(47,109,246,.55),rgba(47,109,246,.25));border-color:rgba(47,109,246,.45)}
.pillRow{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.pill{padding:6px 10px;border-radius:999px;font-size:12px;font-weight:900;border:1px solid var(--line);background:rgba(255,255,255,.04);color:var(--muted)}
.pill.good{color:var(--good)}
.pill.bad{color:var(--bad)}
.pill.caution{color:var(--caution)}
.result{margin-top:12px;padding:12px;border-radius:var(--radius2);border:1px solid var(--line);background:rgba(8,14,26,.60)}
.tag{font-size:11px;font-weight:950;padding:4px 9px;border-radius:999px;margin-left:8px;border:1px solid var(--line)}
.tag.food{background:rgba(47,109,246,.14)}
.tag.add{background:rgba(138,92,255,.14)}
.mono{font-family:var(--mono)}
</style>
</head>
<body>
<div class="wrap">

<div class="hero">
  <div>
    <h1>üêæ Coco & Ollie ‚Äî Scanner + Meal Planner</h1>
    <div class="sub">Ultra Smart Matching ‚Ä¢ OCR Safe ‚Ä¢ No Features Lost</div>
  </div>
  <div class="badgeRow">
    <span class="badge">Smart phrase matching</span>
    <span class="badge">Order independent</span>
    <span class="badge">Plural proof</span>
    <span class="badge">OCR safe</span>
  </div>
</div>

<div class="card">
<h2>üîç Scanner</h2>

<textarea id="scanInput" placeholder="Paste ingredients here..."></textarea>

<div class="btnRow">
  <button class="btn primary" onclick="scanAll()">Scan</button>
  <button class="btn" onclick="clearScan()">Clear</button>
</div>

<div id="scanResults"></div>
</div>

</div>

<script>
/* ============================
   UPGRADED INTELLIGENT SCANNER
   ============================ */

const BANNED = [
  "Pepper - green",
  "Carrot",
  "Coconut",
  "Rice (brown)",
  "Yogurt (plain)"
];

function normalize(str){
  return str.toLowerCase()
    .replace(/\([^)]*\)/g," ")
    .replace(/[^a-z0-9\s]/g," ")
    .replace(/\s+/g," ")
    .trim();
}

function singular(word){
  if(word.endsWith("ies")) return word.slice(0,-3)+"y";
  if(word.endsWith("s") && !word.endsWith("ss")) return word.slice(0,-1);
  return word;
}

function tokenize(str){
  return normalize(str)
    .split(" ")
    .map(singular)
    .filter(Boolean);
}

function phraseMatch(input, target){
  const inputTokens = tokenize(input);
  const targetTokens = tokenize(target);

  return targetTokens.every(t => inputTokens.includes(t));
}

function scanAll(){
  const raw = document.getElementById("scanInput").value;
  const items = raw.split(/[\n,]+/).map(x=>x.trim()).filter(Boolean);

  let html="";

  items.forEach(item=>{
    let flagged = BANNED.find(b => phraseMatch(item,b));

    if(flagged){
      html += `
      <div class="result bad">
        <b>${item}</b>
        <span class="tag food">Food</span>
        <div class="pillRow">
          <span class="pill bad">FLAGGED</span>
        </div>
        <div>Matched: ${flagged}</div>
      </div>`;
    } else {
      html += `
      <div class="result good">
        <b>${item}</b>
        <span class="pill good">Safe</span>
      </div>`;
    }
  });

  document.getElementById("scanResults").innerHTML = html;
}

function clearScan(){
  document.getElementById("scanInput").value="";
  document.getElementById("scanResults").innerHTML="";
}
</script>

</body>
</html>
