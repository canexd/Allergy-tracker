<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coco & Ollie Food System</title>

<style>
body{
background:#0f1c2e;
color:#fff;
font-family:system-ui;
margin:0;
padding:20px;
}

h1{text-align:center}

.tabs{
display:flex;
flex-wrap:wrap;
gap:8px;
justify-content:center;
margin-bottom:20px;
}

button{
background:#1f2f4a;
color:white;
border:none;
padding:10px 16px;
border-radius:8px;
cursor:pointer;
}

button.active{background:#2f6df6}
.card{
background:#16243a;
padding:16px;
border-radius:12px;
margin-bottom:20px;
}

input,textarea,select{
width:100%;
padding:10px;
margin:6px 0;
border-radius:8px;
border:none;
background:#1e2e4a;
color:white;
}

textarea{min-height:80px}

.result-high{color:#ff5c5c}
.result-safe{color:#4cff88}
</style>
</head>
<body>

<h1>Coco & Ollie Food System</h1>

<div class="tabs">
<button onclick="showTab('scanner')" id="tab-scanner" class="active">Scanner</button>
<button onclick="showTab('meal')" id="tab-meal">Meal Planner</button>
<button onclick="showTab('shared')" id="tab-shared">Shared Safe</button>
</div>

<div id="scanner" class="card">
<h2>Ingredient Scanner</h2>
<textarea id="scanInput" placeholder="Paste ingredients..."></textarea>
<button onclick="runDemo()">Demo</button>
<button onclick="scanIngredients()">Scan</button>
<div id="scanResults"></div>
</div>

<div id="meal" class="card" style="display:none">
<h2>Meal Planner</h2>

<label>Coco weight (lbs)</label>
<input type="number" id="cocoWeight" value="55">

<label>Ollie weight (lbs)</label>
<input type="number" id="ollieWeight" value="65">

<label>Feeding % bodyweight</label>
<input type="range" id="feedPercent" min="1.5" max="4" step="0.1" value="2.5">
<div id="percentLabel">2.5%</div>

<label>Meals per day</label>
<select id="mealsPerDay">
<option value="1">1</option>
<option value="2" selected>2</option>
<option value="3">3</option>
</select>

<label>Batch days</label>
<input type="range" id="batchDays" min="1" max="7" value="7">
<div id="batchLabel">7 days</div>

<button onclick="generateMeal()">Generate Meal</button>
<button onclick="exportGrocery()">Export Grocery List</button>

<div id="mealOutput"></div>
</div>

<div id="shared" class="card" style="display:none">
<h2>Shared Safe Foods</h2>
<div id="sharedList"></div>
</div>

<script>

/* =============================
   ALLERGY DATA
============================= */

const cocoModerate = [
"beef","coconut","cornflakes","egg yolk - chicken","egg yolk - duck",
"hare","iceberg lettuce","lemon","pecan nut","pepper - green",
"psyllium seed husk","strawberry","turnip","winkles"
];

const cocoHigh = [
"canola oil","chia seeds","clove","haddock","herring",
"mozzarella","paprika","peach","rabbit","rabbit heart",
"rabbit liver","rapeseed oil","sugar (brown)","sweet potato","tahini"
];

const ollieModerate = [
"anchovy","catfish","cheese - cottage","chicken heart",
"condensed milk","cream","egg white - chicken","emmer wheat",
"farina secalis cerealis","ginkgo biloba","greens (collard)",
"lamb liver","liver - ox","milkweed","onion","pepper - green",
"pheasant gizzard","pigeon","raisin","skate","soy flour",
"sweet potato","tilefish","winkles"
];

const ollieHigh = [
"avocado oil","boar","buttermilk","canola meal","coconut",
"coconut oil","crab","duck liver","noodles - wheat",
"papaya","parmesan","prawn","sage","strawberry",
"tapioca","venison meal"
];

/* =============================
   SAFE FOOD LIBRARY
   (Only safe foods)
============================= */

const proteins = [
"chicken","turkey","salmon","sardine","mackerel",
"lamb","venison","duck","bison"
];

const carbs = [
"rice (white)","rice (brown)","oats","barley","quinoa"
];

const veggies = [
"carrot","zucchini","spinach","broccoli","green beans"
];

const fats = [
"olive oil","fish oil","salmon oil"
];

const flavorBoosters = [
"pumpkin puree","blueberries","bone broth",
"plain yogurt","apple","parsley"
];

/* =============================
   TAB SWITCH
============================= */

function showTab(tab){
document.getElementById("scanner").style.display="none";
document.getElementById("meal").style.display="none";
document.getElementById("shared").style.display="none";

document.getElementById("tab-scanner").classList.remove("active");
document.getElementById("tab-meal").classList.remove("active");
document.getElementById("tab-shared").classList.remove("active");

document.getElementById(tab).style.display="block";
document.getElementById("tab-"+tab).classList.add("active");
}

/* =============================
   SCANNER
============================= */

function scanIngredients(){
let input=document.getElementById("scanInput").value.toLowerCase();
let items=input.split(/[\n,]+/);
let output="";

items.forEach(item=>{
let i=item.trim();
if(!i)return;

let cocoBad=cocoModerate.includes(i)||cocoHigh.includes(i);
let ollieBad=ollieModerate.includes(i)||ollieHigh.includes(i);

if(cocoBad||ollieBad){
output+=`<div class='result-high'>${i} — NOT SAFE</div>`;
}else{
output+=`<div class='result-safe'>${i} — SAFE</div>`;
}
});

document.getElementById("scanResults").innerHTML=output;
}

function runDemo(){
document.getElementById("scanInput").value="Chicken\nBeef\nPumpkin Puree\nCoconut";
scanIngredients();
}

/* =============================
   MEAL PLANNER
============================= */

document.getElementById("feedPercent").oninput=function(){
document.getElementById("percentLabel").innerText=this.value+"%";
}

document.getElementById("batchDays").oninput=function(){
document.getElementById("batchLabel").innerText=this.value+" days";
}

let groceryData={};

function generateMeal(){

let coco=parseFloat(document.getElementById("cocoWeight").value);
let ollie=parseFloat(document.getElementById("ollieWeight").value);
let percent=parseFloat(document.getElementById("feedPercent").value)/100;
let meals=parseInt(document.getElementById("mealsPerDay").value);
let days=parseInt(document.getElementById("batchDays").value);

let cocoDaily=coco*percent*16;
let ollieDaily=ollie*percent*16;

let totalDaily=cocoDaily+ollieDaily;

let protein=proteins[Math.floor(Math.random()*proteins.length)];
let carb=carbs[Math.floor(Math.random()*carbs.length)];
let veg=veggies[Math.floor(Math.random()*veggies.length)];
let fat=fats[Math.floor(Math.random()*fats.length)];
let flavor=flavorBoosters[Math.floor(Math.random()*flavorBoosters.length)];

let batchTotal=totalDaily*days;

groceryData={
[protein]:(batchTotal*0.5/16).toFixed(2)+" lbs",
[carb]:(batchTotal*0.2/16).toFixed(2)+" lbs",
[veg]:(batchTotal*0.15/16).toFixed(2)+" lbs",
[fat]:(batchTotal*0.1/16).toFixed(2)+" lbs",
[flavor]:(batchTotal*0.05/16).toFixed(2)+" lbs"
};

document.getElementById("mealOutput").innerHTML=
`
<h3>Meal Suggestion</h3>
Protein: ${protein}<br>
Carb: ${carb}<br>
Veg: ${veg}<br>
Fat: ${fat}<br>
Flavor: ${flavor}<br><br>

Coco Daily: ${cocoDaily.toFixed(2)} oz (~${(cocoDaily/4).toFixed(2)} cups)<br>
Ollie Daily: ${ollieDaily.toFixed(2)} oz (~${(ollieDaily/4).toFixed(2)} cups)<br><br>

Batch (${days} days): ${(batchTotal/16).toFixed(2)} lbs
`;
}

/* =============================
   GROCERY EXPORT
============================= */

function exportGrocery(){
let text="Grocery List:\n\n";
for(let item in groceryData){
text+=item+" — "+groceryData[item]+"\n";
}
alert(text);
}

/* =============================
   SHARED SAFE LIST
============================= */

function loadShared(){
document.getElementById("sharedList").innerHTML=
[...proteins,...carbs,...veggies,...fats,...flavorBoosters]
.join("<br>");
}

loadShared();

</script>

</body>
</html>
