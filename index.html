<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Coco & Ollie Food System</title>

<style>
body{
margin:0;
font-family:system-ui;
background:#071225;
color:#e6eefc;
}
.wrap{max-width:1000px;margin:auto;padding:16px}
.card{
background:#0f2344;
padding:16px;
border-radius:14px;
margin:16px 0;
}
button{
background:#2e6df6;
color:white;
border:none;
padding:10px 14px;
border-radius:10px;
cursor:pointer;
margin-top:8px;
}
input,textarea,select{
width:100%;
padding:8px;
margin-top:6px;
background:#0b1b33;
border:1px solid #1c335f;
color:white;
border-radius:8px;
}
.tabs{display:flex;gap:8px;flex-wrap:wrap}
.tab-btn{
background:#10264d;
padding:6px 10px;
border-radius:8px;
cursor:pointer;
}
.tab-btn.active{background:#2e6df6}
.hidden{display:none}
.red{color:#ff5e5e}
.yellow{color:#ffd65e}
.green{color:#57e389}
.sep{height:1px;background:#1c335f;margin:12px 0}
.small{font-size:12px;color:#9fb2d9}
</style>
</head>

<body>
<div class="wrap">

<h2>Coco & Ollie Food System</h2>

<div class="tabs">
<div class="tab-btn active" onclick="showTab('scanner')">Scanner</div>
<div class="tab-btn" onclick="showTab('master')">Master</div>
<div class="tab-btn" onclick="showTab('shared')">Shared Safe</div>
<div class="tab-btn" onclick="showTab('meal')">Meal Planner</div>
</div>

<!-- SCANNER -->
<div id="scanner" class="tab">
<div class="card">
<h3>Ingredient Scanner</h3>
<textarea id="scanInput" rows="5" placeholder="Paste ingredients (comma or line separated)"></textarea>
<button onclick="runScan()">Scan</button>
<div id="scanResults"></div>
</div>
</div>

<!-- MASTER -->
<div id="master" class="tab hidden">
<div class="card">
<h3>Master Reactivity</h3>
<div id="masterList"></div>
</div>
</div>

<!-- SHARED SAFE -->
<div id="shared" class="tab hidden">
<div class="card">
<h3>Shared Safe Ingredients</h3>
<div id="sharedList"></div>
</div>
</div>

<!-- MEAL -->
<div id="meal" class="tab hidden">
<div class="card">
<h3>Meal Planner</h3>

<label>Coco weight (lbs)</label>
<input id="cocoWeight" type="number" value="55">

<label>Ollie weight (lbs)</label>
<input id="ollieWeight" type="number" value="65">

<label>Feeding % bodyweight</label>
<input id="feedPct" type="range" min="2" max="3" step="0.1" value="2.5"
oninput="feedLabel.innerText=this.value+'%'">
<div class="small" id="feedLabel">2.5%</div>

<label>Meals per day</label>
<select id="mealsPerDay">
<option>1</option>
<option selected>2</option>
<option>3</option>
</select>

<label>Batch days</label>
<input id="batchDays" type="range" min="1" max="7" value="7"
oninput="batchLabel.innerText=this.value+' days'">
<div class="small" id="batchLabel">7 days</div>

<button onclick="generateMeal()">Generate Meal</button>

<div id="mealOutput"></div>
</div>
</div>

<script>

/* ================= DATA ================= */

const DATA = {
  coco:{
    high:[
      "Canola Oil","Chia Seeds","Clove","Haddock","Herring",
      "Mozzarella","Paprika","Peach","Rabbit","Rabbit Heart",
      "Rabbit Liver","Rapeseed oil","Sugar (brown)",
      "Sweet Potato","Tahini"
    ],
    moderate:[
      "Ammonium Laureth Sulfate","Beef","Bilberry",
      "Cheese - Cheddar","Chlorella","Coconut","Cornflakes",
      "Egg Yolk - Chicken","Egg Yolk - Duck","Hare",
      "Iceberg lettuce","Lemon","Pecan nut","Pepper - green",
      "Psyllium Seed Husk","Strawberry","Turnip","Winkles"
    ]
  },
  ollie:{
    high:[
      "Avocado oil","Boar","Buttermilk","Canola Meal","Coconut",
      "Coconut Oil","Crab","Duck Liver","Noodles - wheat",
      "Papaya","Parmesan","Prawn","Sage","Strawberry",
      "Tapioca","Venison Meal"
    ],
    moderate:[
      "Anchovy","Catfish","Cheese - Cottage","Chicken Heart",
      "Condensed milk","Cream","Egg White - Chicken",
      "Emmer wheat","Farina secalis cerealis","Ginkgo biloba",
      "Greens (Collard)","Lamb Liver","Liver - ox","Milkweed",
      "Onion","Pepper - green","Pheasant Gizzard","Pigeon",
      "Raisin","Skate","Soy Flour","Sweet Potato",
      "Tilefish","Winkles"
    ]
  }
};

function normalize(x){return x.trim().toLowerCase()}

function getReaction(item){
  const i=normalize(item)
  const cHigh=DATA.coco.high.some(x=>normalize(x)==i)
  const cMod=DATA.coco.moderate.some(x=>normalize(x)==i)
  const oHigh=DATA.ollie.high.some(x=>normalize(x)==i)
  const oMod=DATA.ollie.moderate.some(x=>normalize(x)==i)
  return{
    coco:cHigh?"high":cMod?"moderate":"low",
    ollie:oHigh?"high":oMod?"moderate":"low"
  }
}

function showTab(id){
  document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"))
  document.querySelectorAll(".tab").forEach(t=>t.classList.add("hidden"))
  document.querySelector(`[onclick="showTab('${id}')"]`).classList.add("active")
  document.getElementById(id).classList.remove("hidden")
}

/* ================= SCANNER ================= */

function runScan(){
  const input=document.getElementById("scanInput").value
  const items=input.split(/[\n,]+/).map(x=>x.trim()).filter(Boolean)
  const results=document.getElementById("scanResults")
  results.innerHTML=""
  items.forEach(item=>{
    const r=getReaction(item)
    const div=document.createElement("div")
    let status=""
    if(r.coco==="high"||r.ollie==="high"){
      status="<span class='red'>High</span>"
    }else if(r.coco==="moderate"||r.ollie==="moderate"){
      status="<span class='yellow'>Moderate</span>"
    }else{
      status="<span class='green'>(Low)</span>"
    }
    div.innerHTML=`${item} — ${status}`
    results.appendChild(div)
  })
}

/* ================= MASTER ================= */

function buildMaster(){
  const container=document.getElementById("masterList")
  container.innerHTML=""
  const combined={}
  Object.values(DATA).forEach(dog=>{
    [...dog.high,...dog.moderate].forEach(item=>{
      const key=item.toLowerCase()
      if(!combined[key])combined[key]=[]
      combined[key].push(dog)
    })
  })
  Object.keys(combined).sort().forEach(item=>{
    const r=getReaction(item)
    const div=document.createElement("div")
    div.innerHTML=`${item} — <span class="${r.coco==="high"||r.ollie==="high"?"red":"yellow"}">
    ${r.coco==="high"||r.ollie==="high"?"High":"Moderate"}
    </span>`
    container.appendChild(div)
  })
}
buildMaster()

/* ================= SHARED SAFE ================= */

const LIBRARY=["Chicken","Turkey","Salmon","Whitefish","Lamb","Beef","Pork","Goat","Carrot","Pumpkin","Zucchini","Rice","Quinoa","Oats","Barley","Blueberries","Apple"]

function buildShared(){
  const container=document.getElementById("sharedList")
  container.innerHTML=""
  LIBRARY.forEach(item=>{
    const r=getReaction(item)
    if(r.coco==="low"&&r.ollie==="low"){
      const div=document.createElement("div")
      div.innerHTML=`<span class="green">${item}</span>`
      container.appendChild(div)
    }
  })
}
buildShared()

/* ================= MEAL PLANNER ================= */

function lbsToOz(l){return l*16}
function ozToCups(o){return o/4}
function ozToLbs(o){return o/16}

function generateMeal(){
  const coco=parseFloat(cocoWeight.value)
  const ollie=parseFloat(ollieWeight.value)
  const pct=parseFloat(feedPct.value)/100
  const meals=parseInt(mealsPerDay.value)
  const days=parseInt(batchDays.value)

  const cocoDaily=lbsToOz(coco*pct)
  const ollieDaily=lbsToOz(ollie*pct)
  const totalDaily=cocoDaily+ollieDaily

  const safe=LIBRARY.filter(item=>{
    const r=getReaction(item)
    return r.coco==="low"&&r.ollie==="low"
  })

  const rand=arr=>arr[Math.floor(Math.random()*arr.length)]
  const protein=rand(safe)
  const batchTotal=totalDaily*days

  mealOutput.innerHTML=`
  <div class="card">
  <h4>Meal Suggestion</h4>
  Protein: ${protein}
  <div class="sep"></div>
  Coco: ${cocoDaily.toFixed(2)} oz (~${ozToCups(cocoDaily).toFixed(2)} cups)
  <br>Ollie: ${ollieDaily.toFixed(2)} oz (~${ozToCups(ollieDaily).toFixed(2)} cups)
  <div class="sep"></div>
  Batch (${days} days): ${batchTotal.toFixed(2)} oz
  <br>${ozToLbs(batchTotal).toFixed(2)} lbs
  <br>~${ozToCups(batchTotal).toFixed(2)} cups
  </div>`
}

</script>
</div>
</body>
</html>
